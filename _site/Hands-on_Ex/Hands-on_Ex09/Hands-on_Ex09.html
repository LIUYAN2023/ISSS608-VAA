<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="LIU YAN">
<meta name="dcterms.date" content="2023-06-16">

<title>ISSS608-VAA - Hands-on_Ex09</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <img src="../../images/visual-analytics-icon.png" alt="">
    <span class="navbar-title">ISSS608-VAA</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">Hands-on Exercise</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html">
 <span class="dropdown-text">Hands-on Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html">
 <span class="dropdown-text">Hands-on Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html">
 <span class="dropdown-text">Hands-on Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex04/Hands-on_Ex04.html">
 <span class="dropdown-text">Hands-on Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex05/Hands-on_Ex05.html">
 <span class="dropdown-text">Hands-on Exercise 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex06/Hands-on_Ex06.html">
 <span class="dropdown-text">Hands-on Exercise 6</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex07/Hands-on_Ex07.html">
 <span class="dropdown-text">Hands-on Exercise 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex08/Hands-on_Ex08.html">
 <span class="dropdown-text">Hands-on Exercise 8</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Hands-on_Ex09/Hands-on_Ex09.html">
 <span class="dropdown-text">Hands-on Exercise 9</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">In-class Exercise</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercise">    
        <li>
    <a class="dropdown-item" href="../../In-class Exercise/In-class Exercise 1/In-class_Ex01.html">
 <span class="dropdown-text">In-class Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class Exercise/In-class Exercise 3/In-class_Ex03.html">
 <span class="dropdown-text">In-class Exercise 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class Exercise/In-class Exercise 4/In-class_Ex04.html">
 <span class="dropdown-text">In-class Exercise 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../In-class Exercise/In-class Exercise 5/In-class_Ex05.html">
 <span class="dropdown-text">In-class Exercise 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">Take-home Exercise</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home Exercise/Take-home Exercise 1/Take-home_Ex01.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home Exercise/Take-home Exercise 2/Take-home_Ex02.html">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Take-home Exercise/Take-home Exercise 3/Take-home_Ex03.html">
 <span class="dropdown-text">Take-home Exercise 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#information-dashboard-design-r-methods" id="toc-information-dashboard-design-r-methods" class="nav-link active" data-scroll-target="#information-dashboard-design-r-methods">1. Information Dashboard Design: R methods</a>
  <ul class="collapse">
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">1.1 Getting started</a>
  <ul class="collapse">
  <li><a href="#download-packages" id="toc-download-packages" class="nav-link" data-scroll-target="#download-packages">1.1.1 Download Packages</a></li>
  <li><a href="#importing-microsoft-access-database" id="toc-importing-microsoft-access-database" class="nav-link" data-scroll-target="#importing-microsoft-access-database">1.1.2 Importing Microsoft Access database</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">1.1.3 Data Preparation</a></li>
  </ul></li>
  <li><a href="#bullet-chart-in-ggplot2" id="toc-bullet-chart-in-ggplot2" class="nav-link" data-scroll-target="#bullet-chart-in-ggplot2">1.2 Bullet chart in ggplot2</a></li>
  <li><a href="#plotting-sparklines-using-ggplot2" id="toc-plotting-sparklines-using-ggplot2" class="nav-link" data-scroll-target="#plotting-sparklines-using-ggplot2">1.3 Plotting sparklines using ggplot2</a>
  <ul class="collapse">
  <li><a href="#preparing-the-data" id="toc-preparing-the-data" class="nav-link" data-scroll-target="#preparing-the-data">1.3.1 Preparing the data</a></li>
  <li><a href="#sparklines-in-ggplot2" id="toc-sparklines-in-ggplot2" class="nav-link" data-scroll-target="#sparklines-in-ggplot2">1.3.2 sparklines in ggplot2</a></li>
  </ul></li>
  <li><a href="#static-information-dashboard-design-gt-and-gtextras-methods" id="toc-static-information-dashboard-design-gt-and-gtextras-methods" class="nav-link" data-scroll-target="#static-information-dashboard-design-gt-and-gtextras-methods">1.4 Static Information Dashboard Design: gt and gtExtras methods</a>
  <ul class="collapse">
  <li><a href="#plotting-a-simple-bullet-chart" id="toc-plotting-a-simple-bullet-chart" class="nav-link" data-scroll-target="#plotting-a-simple-bullet-chart">1.4.1 Plotting a simple bullet chart</a></li>
  </ul></li>
  <li><a href="#sparklines-gtextras-method" id="toc-sparklines-gtextras-method" class="nav-link" data-scroll-target="#sparklines-gtextras-method">1.5 sparklines: gtExtras method</a></li>
  <li><a href="#plotting-coffechain-sales-report" id="toc-plotting-coffechain-sales-report" class="nav-link" data-scroll-target="#plotting-coffechain-sales-report">1.6 Plotting Coffechain Sales report</a>
  <ul class="collapse">
  <li><a href="#adding-statistics" id="toc-adding-statistics" class="nav-link" data-scroll-target="#adding-statistics">1.6.1 Adding statistics</a></li>
  <li><a href="#combining-the-data.frame" id="toc-combining-the-data.frame" class="nav-link" data-scroll-target="#combining-the-data.frame">1.6.2 Combining the data.frame</a></li>
  <li><a href="#plotting-the-updated-data.table" id="toc-plotting-the-updated-data.table" class="nav-link" data-scroll-target="#plotting-the-updated-data.table">1.6.3 Plotting the updated data.table</a></li>
  <li><a href="#combining-bullet-chart-and-sparklines" id="toc-combining-bullet-chart-and-sparklines" class="nav-link" data-scroll-target="#combining-bullet-chart-and-sparklines">1.6.4 Combining bullet chart and sparklines</a></li>
  </ul></li>
  <li><a href="#interactive-information-dashboard-design-reactable-and-reactablefmtr-methods" id="toc-interactive-information-dashboard-design-reactable-and-reactablefmtr-methods" class="nav-link" data-scroll-target="#interactive-information-dashboard-design-reactable-and-reactablefmtr-methods">1.7 Interactive Information Dashboard Design: reactable and reactablefmtr methods</a>
  <ul class="collapse">
  <li><a href="#plotting-interactive-sparklines" id="toc-plotting-interactive-sparklines" class="nav-link" data-scroll-target="#plotting-interactive-sparklines">1.7.1 Plotting interactive sparklines</a></li>
  <li><a href="#changing-the-pagesize" id="toc-changing-the-pagesize" class="nav-link" data-scroll-target="#changing-the-pagesize">1.7.2 Changing the pagesize</a></li>
  <li><a href="#adding-points-and-labels" id="toc-adding-points-and-labels" class="nav-link" data-scroll-target="#adding-points-and-labels">1.7.3 Adding points and labels</a></li>
  <li><a href="#adding-reference-line" id="toc-adding-reference-line" class="nav-link" data-scroll-target="#adding-reference-line">1.7.4 Adding reference line</a></li>
  <li><a href="#adding-bandline" id="toc-adding-bandline" class="nav-link" data-scroll-target="#adding-bandline">1.7.5 Adding bandline</a></li>
  <li><a href="#changing-from-sparkline-to-sparkbar" id="toc-changing-from-sparkline-to-sparkbar" class="nav-link" data-scroll-target="#changing-from-sparkline-to-sparkbar">1.7.6 Changing from sparkline to sparkbar</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hands-on_Ex09</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>LIU YAN </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 16, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="information-dashboard-design-r-methods" class="level1">
<h1>1. Information Dashboard Design: R methods</h1>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">1.1 Getting started</h2>
<section id="download-packages" class="level3">
<h3 class="anchored" data-anchor-id="download-packages">1.1.1 Download Packages</h3>
<p>For the purpose of this hands-on exercise, the following R packages will be used.</p>
<pre><code>pacman::p_load(lubridate, ggthemes, reactable,
reactablefmtr, gt, gtExtras, tidyverse)</code></pre>
<p>tidyverse provides a collection of functions for performing data science task such as importing, tidying, wrangling data and visualising data. It is not a single package but a collection of modern R packages including but not limited to readr, tidyr, dplyr, ggplot, tibble, stringr, forcats and purrr.</p>
<p>lubridate provides functions to work with dates and times more efficiently.</p>
<p>ggthemes is an extension of ggplot2. It provides additional themes beyond the basic themes of ggplot2.</p>
<p>gtExtras provides some additional helper functions to assist in creating beautiful tables with gt, an R package specially designed for anyone to make wonderful-looking tables using the R programming language.</p>
<p>reactable provides functions to create interactive data tables for R, based on the React Table library and made with reactR.</p>
<p>reactablefmtr provides various features to streamline and enhance the styling of interactive reactable tables with easy-to-use and highly-customizable functions and themes.</p>
</section>
<section id="importing-microsoft-access-database" class="level3">
<h3 class="anchored" data-anchor-id="importing-microsoft-access-database">1.1.2 Importing Microsoft Access database</h3>
<p>For the purpose of this study, a personal database in Microsoft Access mdb format called Coffee Chain will be used.</p>
<p>n the code chunk below, odbcConnectAccess() of RODBC package is used used to import a database query table into R.</p>
<pre><code>library(RODBC)
con &lt;- odbcConnectAccess('data/Coffee Chain.mdb')
coffeechain &lt;- sqlFetch(con, 'CoffeeChain Query')
write_rds(coffeechain, "data/CoffeeChain.rds")
odbcClose(con)
</code></pre>
</section>
<section id="data-preparation" class="level3">
<h3 class="anchored" data-anchor-id="data-preparation">1.1.3 Data Preparation</h3>
<p>The code chunk below is used to import CoffeeChain.rds into R.</p>
<pre><code>coffeechain &lt;- read_rds("data/rds/CoffeeChain.rds")</code></pre>
<p>Note: This step is optional if coffeechain is already available in R.</p>
<p>The code chunk below is used to aggregate Sales and Budgeted Sales at the Product level.</p>
<pre><code>product &lt;- coffeechain %&gt;%
  group_by(`Product`) %&gt;%
  summarise(`target` = sum(`Budget Sales`),
            `current` = sum(`Sales`)) %&gt;%
  ungroup()</code></pre>
</section>
</section>
<section id="bullet-chart-in-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="bullet-chart-in-ggplot2">1.2 Bullet chart in ggplot2</h2>
<p>The code chunk below is used to plot the bullet charts using ggplot2 functions.</p>
<pre><code>ggplot(product, aes(Product, current)) + 
  geom_col(aes(Product, max(target) * 1.01),
           fill="grey85", width=0.85) +
  geom_col(aes(Product, target * 0.75),
           fill="grey60", width=0.85) +
  geom_col(aes(Product, target * 0.5),
           fill="grey50", width=0.85) +
  geom_col(aes(Product, current), 
           width=0.35,
           fill = "black") + 
  geom_errorbar(aes(y = target,
                    x = Product, 
                    ymin = target,
                    ymax= target), 
                width = .4,
                colour = "red",
                size = 1) +
  coord_flip()
</code></pre>
</section>
<section id="plotting-sparklines-using-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="plotting-sparklines-using-ggplot2">1.3 Plotting sparklines using ggplot2</h2>
<p>In this section, you will learn how to plot sparklines by using ggplot2.</p>
<section id="preparing-the-data" class="level3">
<h3 class="anchored" data-anchor-id="preparing-the-data">1.3.1 Preparing the data</h3>
<pre><code>sales_report &lt;- coffeechain %&gt;%
  filter(Date &gt;= "2013-01-01") %&gt;%
  mutate(Month = month(Date)) %&gt;%
  group_by(Month, Product) %&gt;%
  summarise(Sales = sum(Sales)) %&gt;%
  ungroup() %&gt;%
  select(Month, Product, Sales)</code></pre>
<p>The code chunk below is used to compute the minimum, maximum and end othe the month sales.</p>
<pre><code>mins &lt;- group_by(sales_report, Product) %&gt;% 
  slice(which.min(Sales))
maxs &lt;- group_by(sales_report, Product) %&gt;% 
  slice(which.max(Sales))
ends &lt;- group_by(sales_report, Product) %&gt;% 
  filter(Month == max(Month))</code></pre>
<p>The code chunk below is used to compute the 25 and 75 quantiles.</p>
<pre><code>quarts &lt;- sales_report %&gt;%
  group_by(Product) %&gt;%
  summarise(quart1 = quantile(Sales, 
                              0.25),
            quart2 = quantile(Sales, 
                              0.75)) %&gt;%
  right_join(sales_report)</code></pre>
</section>
<section id="sparklines-in-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="sparklines-in-ggplot2">1.3.2 sparklines in ggplot2</h3>
<pre><code>ggplot(sales_report, aes(x=Month, y=Sales)) + 
  facet_grid(Product ~ ., scales = "free_y") + 
  geom_ribbon(data = quarts, aes(ymin = quart1, max = quart2), 
              fill = 'grey90') +
  geom_line(size=0.3) +
  geom_point(data = mins, col = 'red') +
  geom_point(data = maxs, col = 'blue') +
  geom_text(data = mins, aes(label = Sales), vjust = -1) +
  geom_text(data = maxs, aes(label = Sales), vjust = 2.5) +
  geom_text(data = ends, aes(label = Sales), hjust = 0, nudge_x = 0.5) +
  geom_text(data = ends, aes(label = Product), hjust = 0, nudge_x = 1.0) +
  expand_limits(x = max(sales_report$Month) + 
                  (0.25 * (max(sales_report$Month) - min(sales_report$Month)))) +
  scale_x_continuous(breaks = seq(1, 12, 1)) +
  scale_y_continuous(expand = c(0.1, 0)) +
  theme_tufte(base_size = 3, base_family = "Helvetica") +
  theme(axis.title=element_blank(), axis.text.y = element_blank(), 
        axis.ticks = element_blank(), strip.text = element_blank())</code></pre>
</section>
</section>
<section id="static-information-dashboard-design-gt-and-gtextras-methods" class="level2">
<h2 class="anchored" data-anchor-id="static-information-dashboard-design-gt-and-gtextras-methods">1.4 Static Information Dashboard Design: gt and gtExtras methods</h2>
<p>n this section, you will learn how to create static information dashboard by using gt and gtExtras packages. Before getting started, it is highly recommended for you to visit the webpage of these two packages and review all the materials provided on the webpages at least once. You done not have to understand and remember everything provided but at least have an overview of the purposes and functions provided by them.</p>
<section id="plotting-a-simple-bullet-chart" class="level3">
<h3 class="anchored" data-anchor-id="plotting-a-simple-bullet-chart">1.4.1 Plotting a simple bullet chart</h3>
<p>In this section, you will learn how to prepare a bullet chart report by using functions of gt and gtExtras packages.</p>
<pre><code>product %&gt;%
  gt::gt() %&gt;%
  gt_plt_bullet(column = current, 
              target = target, 
              width = 60,
              palette = c("lightblue", 
                          "black")) %&gt;%
  gt_theme_538()
</code></pre>
</section>
</section>
<section id="sparklines-gtextras-method" class="level2">
<h2 class="anchored" data-anchor-id="sparklines-gtextras-method">1.5 sparklines: gtExtras method</h2>
<p>Before we can prepare the sales report by product by using gtExtras functions, code chunk below will be used to prepare the data.</p>
<pre><code>report &lt;- coffeechain %&gt;%
  mutate(Year = year(Date)) %&gt;%
  filter(Year == "2013") %&gt;%
  mutate (Month = month(Date, 
                        label = TRUE, 
                        abbr = TRUE)) %&gt;%
  group_by(Product, Month) %&gt;%
  summarise(Sales = sum(Sales)) %&gt;%
  ungroup()
</code></pre>
<p>It is important to note that one of the requirement of gtExtras functions is that almost exclusively they require you to pass data.frame with list columns. In view of this, code chunk below will be used to convert the report data.frame into list columns.</p>
<pre><code>report %&gt;%
  group_by(Product) %&gt;%
  summarize('Monthly Sales' = list(Sales), 
            .groups = "drop")</code></pre>
</section>
<section id="plotting-coffechain-sales-report" class="level2">
<h2 class="anchored" data-anchor-id="plotting-coffechain-sales-report">1.6 Plotting Coffechain Sales report</h2>
<pre><code>report %&gt;%
  group_by(Product) %&gt;%
  summarize('Monthly Sales' = list(Sales), 
            .groups = "drop") %&gt;%
   gt() %&gt;%
   gt_plt_sparkline('Monthly Sales',
                    same_limit = FALSE)
</code></pre>
<section id="adding-statistics" class="level3">
<h3 class="anchored" data-anchor-id="adding-statistics">1.6.1 Adding statistics</h3>
<p>First, calculate summary statistics by using the code chunk below.</p>
<pre><code>report %&gt;% 
  group_by(Product) %&gt;% 
  summarise("Min" = min(Sales, na.rm = T),
            "Max" = max(Sales, na.rm = T),
            "Average" = mean(Sales, na.rm = T)
            ) %&gt;%
  gt() %&gt;%
  fmt_number(columns = 4,
    decimals = 2)</code></pre>
</section>
<section id="combining-the-data.frame" class="level3">
<h3 class="anchored" data-anchor-id="combining-the-data.frame">1.6.2 Combining the data.frame</h3>
<p>Next, use the code chunk below to add the statistics on the table.</p>
<pre><code>spark &lt;- report %&gt;%
  group_by(Product) %&gt;%
  summarize('Monthly Sales' = list(Sales), 
            .groups = "drop")</code></pre>
<pre><code>sales &lt;- report %&gt;% 
  group_by(Product) %&gt;% 
  summarise("Min" = min(Sales, na.rm = T),
            "Max" = max(Sales, na.rm = T),
            "Average" = mean(Sales, na.rm = T)
            )</code></pre>
<pre><code>sales_data = left_join(sales, spark)</code></pre>
</section>
<section id="plotting-the-updated-data.table" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-updated-data.table">1.6.3 Plotting the updated data.table</h3>
<pre><code>sales_data %&gt;%
  gt() %&gt;%
  gt_plt_sparkline('Monthly Sales',
                   same_limit = FALSE)</code></pre>
</section>
<section id="combining-bullet-chart-and-sparklines" class="level3">
<h3 class="anchored" data-anchor-id="combining-bullet-chart-and-sparklines">1.6.4 Combining bullet chart and sparklines</h3>
<p>Similarly, we can combining the bullet chart and sparklines using the steps below.</p>
<pre><code>bullet &lt;- coffeechain %&gt;%
  filter(Date &gt;= "2013-01-01") %&gt;%
  group_by(`Product`) %&gt;%
  summarise(`Target` = sum(`Budget Sales`),
            `Actual` = sum(`Sales`)) %&gt;%
  ungroup() </code></pre>
<pre><code>sales_data = sales_data %&gt;%
  left_join(bullet)</code></pre>
<pre><code>sales_data %&gt;%
  gt() %&gt;%
  gt_plt_sparkline('Monthly Sales') %&gt;%
  gt_plt_bullet(column = Actual, 
                target = Target, 
                width = 28,
                palette = c("lightblue", 
                          "black")) %&gt;%
  gt_theme_538()</code></pre>
</section>
</section>
<section id="interactive-information-dashboard-design-reactable-and-reactablefmtr-methods" class="level2">
<h2 class="anchored" data-anchor-id="interactive-information-dashboard-design-reactable-and-reactablefmtr-methods">1.7 Interactive Information Dashboard Design: reactable and reactablefmtr methods</h2>
<p>n this section, you will learn how to create interactive information dashboard by using reactable and reactablefmtr packages. Before getting started, it is highly recommended for you to visit the webpage of these two packages and review all the materials provided on the webpages at least once. You done not have to understand and remember everything provided but at least have an overview of the purposes and functions provided by them.</p>
<p>In order to build an interactive sparklines, we need to install dataui R package by using the code chunk below.</p>
<pre><code>remotes::install_github("timelyportfolio/dataui")</code></pre>
<p>Next, you all need to load the package onto R environment by using the code chunk below.</p>
<pre><code>library(dataui)</code></pre>
<section id="plotting-interactive-sparklines" class="level3">
<h3 class="anchored" data-anchor-id="plotting-interactive-sparklines">1.7.1 Plotting interactive sparklines</h3>
<p>Similar to gtExtras, to plot an interactive sparklines by using reactablefmtr package we need to prepare the list field by using the code chunk below.</p>
<pre><code>report &lt;- report %&gt;%
  group_by(Product) %&gt;%
  summarize(`Monthly Sales` = list(Sales))</code></pre>
<p>Next, react_sparkline will be to plot the sparklines as shown below.</p>
<pre><code>reactable(
  report,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkline(report)
    )
  )
)</code></pre>
</section>
<section id="changing-the-pagesize" class="level3">
<h3 class="anchored" data-anchor-id="changing-the-pagesize">1.7.2 Changing the pagesize</h3>
<p>By default the pagesize is 10. In the code chunk below, arguments defaultPageSize is used to change the default setting.</p>
<pre><code>reactable(
  report,
  defaultPageSize = 13,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkline(report)
    )
  )
)</code></pre>
</section>
<section id="adding-points-and-labels" class="level3">
<h3 class="anchored" data-anchor-id="adding-points-and-labels">1.7.3 Adding points and labels</h3>
<p>In the code chunk below highlight_points argument is used to show the minimum and maximum values points and label argument is used to label first and last values.</p>
<pre><code>reactable(
  report,
  defaultPageSize = 13,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkline(
        report,
        highlight_points = highlight_points(
          min = "red", max = "blue"),
        labels = c("first", "last")
        )
    )
  )
)</code></pre>
</section>
<section id="adding-reference-line" class="level3">
<h3 class="anchored" data-anchor-id="adding-reference-line">1.7.4 Adding reference line</h3>
<p>In the code chunk below statline argument is used to show the mean line.</p>
<pre><code>reactable(
  report,
  defaultPageSize = 13,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkline(
        report,
        highlight_points = highlight_points(
          min = "red", max = "blue"),
        statline = "mean"
        )
    )
  )
)</code></pre>
</section>
<section id="adding-bandline" class="level3">
<h3 class="anchored" data-anchor-id="adding-bandline">1.7.5 Adding bandline</h3>
<p>Instead adding reference line, bandline can be added by using the bandline argument.</p>
<pre><code>
reactable(
  report,
  defaultPageSize = 13,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkline(
        report,
        highlight_points = highlight_points(
          min = "red", max = "blue"),
        line_width = 1,
        bandline = "innerquartiles",
        bandline_color = "green"
        )
    )
  )
)
</code></pre>
</section>
<section id="changing-from-sparkline-to-sparkbar" class="level3">
<h3 class="anchored" data-anchor-id="changing-from-sparkline-to-sparkbar">1.7.6 Changing from sparkline to sparkbar</h3>
<p>Instead of displaying the values as sparklines, we can display them as sparkbars as shiwn below.</p>
<pre><code>reactable(
  report,
  defaultPageSize = 13,
  columns = list(
    Product = colDef(maxWidth = 200),
    `Monthly Sales` = colDef(
      cell = react_sparkbar(
        report,
        highlight_bars = highlight_bars(
          min = "red", max = "blue"),
        bandline = "innerquartiles",
        statline = "mean")
    )
  )
)</code></pre>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>